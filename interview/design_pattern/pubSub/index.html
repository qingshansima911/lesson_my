<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 如何实现订阅发布者关系而努力 -->
    <script>
        // 楼盘 发布者
        // 买房 订阅者
        const saleOffice = {
            name:'万科海上传奇',
            clientList:[] // 慢慢加入订阅者
        } //售楼部
        saleOffice.listen = function(fn){
            this.clientList.push(fn);
        }
        // 关注楼盘 listen 监听 涛哥 价格 面积
        saleOffice.listen(function(price, squareMeter){
            // console.log(this.name);
            console.log('价格=' + price);
            console.log('squareMeter=' + squareMeter);
        })
        // 龙班长
        saleOffice.listen(function(price, squareMeter){
            console.log('价格=' + price);
            console.log('squareMeter=' + squareMeter);
        })
        // console.log(saleOffice.clientList);
        saleOffice.trigger = function(){
            for(let i = 0; i < this.clientList.length; i++){
                let client = this.clientList[i];
                client.apply(this,arguments);
            }
        }
        saleOffice.trigger(1200,89);
    </script>
</body>
</html>